<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Massenger</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.min.css" integrity="sha512-usVBAd66/NpVNfBge19gws2j6JZinnca12rAe2l+d+QkLU9fiG02O1X8Q6hepIpr/EYKZvKx/I9WsnujJuOmBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" th:href="@{/css/style1.css}" href="../static/css/style1.css" />
</head>
<body>
<div class="loader-contaner">
    <div class="loader"></div>
</div>
<div id="username-page">
    <div class="username-page-container">
        <h1 class="title">Ism va username kiriting</h1>
        <form id="usernameForm" name="usernameForm">
            <div class="form-group">
                <input type="text" id="name" placeholder="Ism" autocomplete="off" class="form-control" />
            </div>
            <div class="form-group">
                <p class="text-danger" id="errorMsg" style="display: none">Ushbu username band!!!</p>
                <input type="text" id="username" placeholder="username" autocomplete="off" class="form-control" />
            </div>
            <div class="form-group">
                <button type="submit" class="accent username-submit">Kirish</button>
            </div>
        </form>
    </div>
</div>

<div id="chat-page" class="hidden" >
                <div class="card-body contacts_body">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12">
                            <div class="panel panel-default">
                                <div class=" p-2 row" id="contact-header">
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <img id="currentUserImage" src="https://png.pngtree.com/element_our/png_detail/20181214/beard-man-icon-png_269198.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="col-sm-9 pt-3 pl-1">
                                            <span id="currentUserName" class="pl-2 ml-1" style="font-size: 20px">Mahmud</span><br/>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-heading c-list">
                                    <span class="title">Chatlar</span>
                                </div>
                                <ul class="list-group" id="contactList">

                                </ul>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12">
                            <div class="panel panel-default">
                                <div class="panel-heading c-list">
                                    <span class="title">Guruhlar</span>
                                    <div class="row mb-1" style="text-align: center">
                                            <button title="Guruh qo'shish" type="button" class="btn btn-success" data-bs-toggle="modal" href="#exampleModalToggle" style="width: 78%;margin-left: 33px"><i class="fas fa-plus"></i></button>
                                    </div>
                                </div>
                                <ul class="list-group" id="groupList">
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Bekorchilar</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>JTU</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Uzbek</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Alo</span><br/>
                                        </div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Guruh</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>

    <div class="chat-container ml-2">
        <div class="chat-header p-2 row">
            <div class="col-sm-1">
                <button id="goBackBtn" class="btn btn-info p-1 m-0" style="border-radius: 50%; width: 35px; height: 28px; position: relative"><i class="fas fa-arrow-left"></i></button>
            </div>
            <div class="col-sm-11" id="chat-header" style="display: flex">
                <div class="list-group-item" style="display: flex;width: 100%">
                    <div class="col-xs-12 col-sm-3">
                        <img id="chatImage" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA8r_sFDwky4HXW8x2hSMIy7VLsOtTqUmFGQ&usqp=CAU" alt="Jean Myers" class="img-responsive img-circle" />
                    </div>
                    <div class="name col-xs-12 col-sm-9">
                        <span style="padding-top: 25px" id="chatName">JTU</span><br/>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <div class="connecting">
            Ulanmoqda...
        </div>
        <div id="room-id-display"></div>
        <ul id="messageArea">

        </ul>
        <form id="messageForm" name="messageForm" nameForm="messageForm">
            <div class="form-group">
                <div class="input-group clearfix">
                    <input type="text" id="message" placeholder="Shu yerga yozing..."
                           autocomplete="off" class="form-control"/>
                    <button type="submit" class="primary">Yuborish</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalToggleLabel">Guruh nomi va username sini kiriting</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <input type="text" class="form-control" id="groupNameInput" placeholder="Name...">
                </div>
                <div class="mb-3">
                    <input type="text" class="form-control" id="groupUsernameInput" placeholder="Username...">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" data-bs-dismiss="modal" aria-label="Close" onclick="addGroup()">Saqlash</button>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js" integrity="sha512-a6ctI6w1kg3J4dSjknHj3aWLEbjitAXAjLDRUxo2wyYmDFRcz2RJuQr5M3Kt8O/TtUSp8n2rAyaXYy1sjoKmrQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/webjars/sockjs-client/1.0.2/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/webjars/stomp-websocket/2.3.3/stomp.min.js"></script>
<script src="/webjars/js-cookie/2.1.4/js.cookie.js"></script>
<script src="webjars/axios/0.19.2/dist/axios.min.js"></script>
<script src="../static/js/javascript.js" th:src="@{/js/javascript.js}"></script>
<script>
    $(document).ready(function () {

        $("#goBackBtn").click(function () {
            $("#messageForm").hide();
            $("#messageArea").html("");
            $("#chatName").text("");
            $("#chatImage").hide()
            console.log();
            enterRoom("home")
        });
        $( "#contactList" ).on( "click", "li", function() {
            $("li").removeClass("active");
            $(this).addClass("active");
            sessionStorage.setItem("chatType","ONE-TO-ONE-CHAT");
            console.log($(this).text().trim());
            $("#chatImage").show();
            $("#chatName").html($(this).text().trim(" "));
            let id=$(this).attr("id");
            let split = id.split("_");
            console.log("clicked=>",split);
            sessionStorage.setItem("toUserId",split[1]);
            enterRoom(split[0]);
        });
        $( "#groupList" ).on( "click", "li", function() {
            $("li").removeClass("active");
            $(this).addClass("active");
            sessionStorage.setItem("chatType","GROUP-CHAT");
            $("#chatImage").show();
            $("#chatName").html($(this).text().trim(" "));
            let id=$(this).attr("id");
            let split = id.split("_");
            console.log("clicked=>",split);
            sessionStorage.setItem("currentGroupId",split[1]);
            enterRoom(split[0]);
        });
    });
</script>
</body>
</html>


<!-- <li class="list-group-item active" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://png.pngtree.com/element_our/png_detail/20181214/beard-man-icon-png_269198.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Abduraim</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://png.pngtree.com/element_our/png_detail/20181214/beard-man-icon-png_269198.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Mahmud</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Jasmina</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Anna</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Leyla</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Gunzoda</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Gulmira</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://static.vecteezy.com/system/resources/thumbnails/002/002/257/small/beautiful-woman-avatar-character-icon-free-vector.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Zamira</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>
                                    <li class="list-group-item" style="display: flex">
                                        <div class="col-xs-12 col-sm-3">
                                            <img src="https://png.pngtree.com/element_our/png_detail/20181214/beard-man-icon-png_269198.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                        </div>
                                        <div class="name col-xs-12 col-sm-9">
                                            <span>Andrey</span><br/>
                                        </div>
                                        <div class="clearfix"></div>
                                    </li>-->






<!--<!DOCTYPE html>-->
<!--<html xmlns:th="https://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Chat</title>-->
<!--    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">-->
<!--    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">-->
<!--    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">-->
<!--    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">-->
<!--</head>-->
<!--&lt;!&ndash;Coded With Love By Mutiullah Samim&ndash;&gt;-->
<!--<body >-->
<!--<div class="container-fluid">-->
<!--    <div class="row">-->
<!--        <div class="col-md-4 m-0 p-0 chat">-->
<!--            <div class="card contacts_card">-->
<!--            <div class="card-header">-->
<!--                <div class="input-group">-->
<!--                    <input type="text" placeholder="Search..." name="" class="form-control search">-->
<!--                    <div class="input-group-prepend">-->
<!--                        <span class="input-group-text search_btn"><i class="fas fa-search"></i></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card-body contacts_body">-->
<!--                <ul class="contacts">-->
<!--                    <li onclick="allMessage()" class="active">-->
<!--                        <div class="d-flex bd-highlight">-->
<!--                            <div class="img_cont">-->
<!--                                <img src="https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg" class="rounded-circle user_img">-->
<!--                                <span class="status_icon online"></span>-->
<!--                            </div>-->
<!--                            <div class="user_info">-->
<!--                                <span>Khalid</span>-->
<!--                                <p>Kalid is online</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li onclick="allMessage()">-->
<!--                        <div class="d-flex bd-highlight">-->
<!--                            <div class="img_cont">-->
<!--                                <img src="https://2.bp.blogspot.com/-8ytYF7cfPkQ/WkPe1-rtrcI/AAAAAAAAGqU/FGfTDVgkcIwmOTtjLka51vineFBExJuSACLcBGAs/s320/31.jpg" class="rounded-circle user_img">-->
<!--                                <span class="status_icon online"></span>-->
<!--                            </div>-->
<!--                            <div class="user_info">-->
<!--                                <span>Taherah Big</span>-->
<!--                                <p>Taherah left 7 mins ago</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li onclick="allMessage()">-->
<!--                        <div class="d-flex bd-highlight">-->
<!--                            <div class="img_cont">-->
<!--                                <img src="https://i.pinimg.com/originals/ac/b9/90/acb990190ca1ddbb9b20db303375bb58.jpg" class="rounded-circle user_img">-->
<!--                                <span class="status_icon online"></span>-->
<!--                            </div>-->
<!--                            <div class="user_info">-->
<!--                                <span>Sami Rafi</span>-->
<!--                                <p>Sami is online</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li onclick="allMessage()">-->
<!--                        <div class="d-flex bd-highlight">-->
<!--                            <div class="img_cont">-->
<!--                                <img src="https://static.turbosquid.com/Preview/001214/650/2V/boy-cartoon-3D-model_D.jpg" class="rounded-circle user_img">-->
<!--                                <span class="status_icon offline"></span>-->
<!--                            </div>-->
<!--                            <div class="user_info">-->
<!--                                <span>Rashid Samim</span>-->
<!--                                <p>Rashid left 50 mins ago</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </div>-->
<!--        </div></div>-->
<!--        <div class="col-md-8 m-0 p-0 chat">-->
<!--            <div class="card1">-->
<!--                <div class="card-header msg_head">-->
<!--                    <div class="d-flex bd-highlight">-->
<!--                        <div class="img_cont1">-->
<!--                            <img src="https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg" class="rounded-circle user_img1">-->
<!--                            <span class="status_icon1 online"></span>-->
<!--                        </div>-->
<!--                        <div class="user_info1">-->
<!--                            <span>Chat with Khalid</span>-->
<!--                            <p>1767 Messages</p>-->
<!--                        </div>-->
<!--                        <div class="video_cam">-->
<!--                            <span><i class="fas fa-video"></i></span>-->
<!--                            <span><i class="fas fa-phone"></i></span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>-->
<!--                    <div class="action_menu">-->
<!--                        <ul>-->
<!--                            <li><i class="fas fa-user-circle"></i> View profile</li>-->
<!--                            <li><i class="fas fa-users"></i> Add to close friends</li>-->
<!--                            <li><i class="fas fa-plus"></i> Add to group</li>-->
<!--                            <li><i class="fas fa-ban"></i> Block</li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div id="msgCardBody" class="card-body msg_card_body">-->
<!--                </div>-->
<!--                <div class="card-footer msg_card_footer">-->
<!--                    <div class="input-group    msg_sender">-->
<!--                        <div class="input-group-append">-->
<!--                            <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>-->
<!--                        </div>-->
<!--                        <textarea oninput="onInput()" id="messageSender" name="" class="form-control type_msg" placeholder="Type your message..."></textarea>-->
<!--                        <div onclick="sendMessage()" id="btnSend" class="input-group-append">-->
<!--                            <span class="input-group-text send_btn"><i style="color: green;-->
<!--                            background:white;-->
<!--                            border-radius: 50%;-->
<!--                            border:none" class="fas fa-arrow-circle-up"></i></i></span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="webjars/sockjs-client/1.0.2/sockjs.js"></script>-->
<!--<script src="webjars/stomp-websocket/2.3.3/stomp.js"></script>-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js"></script>-->
<!--<script src="../static/js/javascript.js" th:src="@{/js/javascript.js}"></script>-->
<!--<script>-->
<!--    let input = document.getElementById("messageSender");-->
<!--    input.addEventListener("keyup", function(event) {-->
<!--        if (event.keyCode === 13) {-->
<!--            sendMessage();-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
